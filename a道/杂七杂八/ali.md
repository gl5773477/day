1. 事故原因：
    
调用支付宝申请退款的接口，支付宝处理退款申请并确认成功，对返回数据解析时，格式不符，json解析失败尚未走到处理支付宝业务参数的逻辑，结果按照申请退款业务失败的方式处理：即转余额。然而支付宝方认为成功的，且处理退款中。导致支付宝原路退款成功，且用户多了一份余额。

2. 影响面：
涉及资金2-3万，损失3674元，若用户提现或花费余额，则资金立即流失。

3. 解决
关闭支付宝渠道，时间：6月15号下午4点
恢复支付宝渠道，时间：6月15号下午8点

业务：
支付宝申请退款拆分两步逻辑：数据解析和业务分析
数据解析：对相应数据的处理，包括验签
业务分析：分析支付宝对申请的结果处理。

4. 如何避免
这次的bug很难测试出来，无论是用正常的keys还是错误的keys都能跑通。线上原来是没问题的，因为存在一个bug导致后续转余额的逻辑走不通，恰好不会出现多退余额的情况。

修复了一个小bug，chan通道初始化的问题。只能说，对于退款的业务，再小的bug修复也要尽量穷举测试（当时自测用例太少）

